<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Heygen Avatar – Fixed</title>
<style>
  body{
    margin:0;
    background: url('baground.png') no-repeat center center fixed;
    background-size: cover;
    min-height:100vh;
  }
  /* Фиксированные размеры аватара */
  #heygen-streaming-embed{
    z-index:9999;
    position:fixed;
    left:40px; bottom:40px;
    width:360px !important;
    height:640px !important;
    border-radius:12px !important;
    border:0 !important;
    box-shadow:0 8px 24px rgba(0,0,0,.12) !important;
    overflow:hidden !important;
    opacity:0;
    visibility:hidden;
  }
  #heygen-streaming-embed.show{
    opacity:1;
    visibility:visible;
  }
  /* Перебиваем expand из скрипта Heygen */
  #heygen-streaming-embed.expand{
    width:360px !important;
    height:640px !important;
    left:40px !important;
    transform:none !important;
    border-radius:12px !important;
    border:0 !important;
  }
  #heygen-streaming-container{ width:100%; height:100%; }
  #heygen-streaming-container iframe{ width:100%; height:100%; border:0; }
</style>
</head>
<body>

<script>
!function(window){
  const host="https://labs.heygen.com";
  const url=host+"/guest/streaming-embed?share=eyJxdWFsaXR5IjoiaGlnaCIsImF2YXRhck5hbWUiOiJHcmFoYW1fUHJvZmVzc2lvbmFsTG9va19w%0D%0AdWJsaWMiLCJwcmV2aWV3SW1nIjoiaHR0cHM6Ly9maWxlczIuaGV5Z2VuLmFpL2F2YXRhci92My82%0D%0ANDhkOTY1ZDk3Yjk0MDlmOTAxYjNkNjE5NjI3NmZiNV81NTg1MC9wcmV2aWV3X3RhcmdldC53ZWJw%0D%0AIiwibmVlZFJlbW92ZUJhY2tncm91bmQiOnRydWUsImtub3dsZWRnZUJhc2VJZCI6IjZkMzdjMzJm%0D%0ANWNjMTQ2OGU4Mjc5N2ZiMzJhZTBiZTFlIiwidXNlcm5hbWUiOiJjZTQ1OTZmMmMyYmM0ZGI2YmEy%0D%0AOTIwMGJlZTEyOWE3YSJ9&inIFrame=1";

  const wrapDiv=document.createElement("div");
  wrapDiv.id="heygen-streaming-embed";

  const container=document.createElement("div");
  container.id="heygen-streaming-container";

  const iframe=document.createElement("iframe");
  iframe.allowFullscreen=false;
  iframe.title="Streaming Embed";
  iframe.role="dialog";
  iframe.allow="microphone";
  iframe.src=url;

  window.addEventListener("message",(e)=>{
    if(e.origin!==host || !e.data || e.data.type!=="streaming-embed") return;
    if(e.data.action==="init"){
      wrapDiv.classList.add("show");
    }
    // Никаких resize не делаем
  });

  container.appendChild(iframe);
  wrapDiv.appendChild(container);
  document.body.appendChild(wrapDiv);
}(globalThis);
</script>

</body>
</html>
